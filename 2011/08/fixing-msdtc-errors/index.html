<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<title>Fixing MSDTC errors 4135 4163 4185 4112</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-19900770-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-19900770-2")</script>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=alternate type=application/rss+xml href=https://trukhanov.com/index.xml title="Perpetuum informatio - Never ending IT story">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Fixing MSDTC errors 4135 4163 4185 4112">
<meta name=twitter:description content="One of clients had problem with MSDTC service on Windows 2003 server, which couldn’t start. After short investigation I have found corresponding errors in Application log:

Event Type:    Error
Event Source:    MSDTC
Event Category:    LOG
Event ID:    4163
Date:        2011-08-02
Time:        12:02:08 PM
User:        N/A
Computer:    servername
Description:
MS DTC log file not found. After ensuring that all Resource Managers coordinated by MS DTC have no indoubt transactions, please run msdtc -resetlog to create the log file.
For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp.
">
<link rel=stylesheet href=https://trukhanov.com/fontawesome/css/all.min.css>
<link crossorigin=anonymous href=/css/styles.min.css integrity rel="preload stylesheet" as=style>
<link rel=stylesheet href=https://trukhanov.com/css/custom.css>
<link id=dark-mode-theme crossorigin=anonymous href=/css/dark.min.css integrity rel="preload stylesheet" as=style>
<script>var darkTheme=document.getElementById("dark-mode-theme"),storedTheme=localStorage.getItem("dark-mode-storage");storedTheme==="dark"?darkTheme.disabled=!1:storedTheme==="light"&&(darkTheme.disabled=!0)</script>
<script defer crossorigin=anonymous src=/js/theme.js integrity></script>
<script defer crossorigin=anonymous src=/js/instantpage.min.js integrity></script><meta name=generator content="Hugo 0.93.0">
</head><body>
<header>
<nav class=navbar>
<div class=nav>
<ul class=nav-links>
</ul></div></nav><div class=intro-header>
<div class=container>
<div class=post-heading>
<h1>
Fixing MSDTC errors 4135 4163 4185 4112
</h1><span class=meta-post>
<em class="fa fa-calendar-alt"></em>&nbsp;Aug 2, 2011
&nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
<a href=https://trukhanov.com/categories/ProblemFixing/>ProblemFixing</a>&nbsp;
<a href=https://trukhanov.com/categories/Windows-Server/>Windows Server</a>&nbsp;
</span>
</div></div></div></header><div class=container role=main>
<article class=article class=blog-post>
<p>One of clients had problem with MSDTC service on Windows 2003 server, which couldn’t start. After short investigation I have found corresponding errors in Application log:</p><blockquote>
<p>Event Type:    Error<br>
Event Source:    MSDTC<br>
Event Category:    LOG<br>
Event ID:    4163<br>
Date:        2011-08-02<br>
Time:        12:02:08 PM<br>
User:        N/A<br>
Computer:    <em>servername</em><br>
Description:<br>
MS DTC log file not found. After ensuring that all Resource Managers coordinated by MS DTC have no indoubt transactions, please run msdtc -resetlog to create the log file.</p><p>For more information, see Help and Support Center at <a href=http://go.microsoft.com/fwlink/events.asp>http://go.microsoft.com/fwlink/events.asp</a>.</p></blockquote><p>and</p><blockquote>
<p>Event Type: Error<br>
Event Source: MSDTC<br>
Event Category: TM<br>
Event ID: 4185<br>
Date: 2011-08-02<br>
Time: 12:02:08 PM<br>
User: N/A<br>
Computer: <em>servername</em><br>
Description:<br>
MS DTC Transaction Manager start failed. LogInit returned error 0x3.</p><p>For more information, see Help and Support Center at <a href=http://go.microsoft.com/fwlink/events.asp>http://go.microsoft.com/fwlink/events.asp</a>.</p></blockquote><p>and</p><blockquote>
<p>Event Type: Error<br>
Event Source: MSDTC<br>
Event Category: SVC<br>
Event ID: 4112<br>
Date: 2011-08-02<br>
Time: 12:02:08 PM<br>
User: N/A<br>
Computer: <em>servername</em><br>
Description:<br>
Could not start the MS DTC Transaction Manager.</p><p>For more information, see Help and Support Center at <a href=http://go.microsoft.com/fwlink/events.asp>http://go.microsoft.com/fwlink/events.asp</a>.</p></blockquote><p>Also System eventlog contained:</p><blockquote>
<p>Event Type: Error<br>
Event Source: Service Control Manager<br>
Event Category: None<br>
Event ID: 7024<br>
Date: 2011-08-02<br>
Time: 12:19:26 PM<br>
User: N/A<br>
Computer: <em>servername</em><br>
Description:<br>
The Distributed Transaction Coordinator service terminated with service-specific error 3221229584 (0xC0001010).</p><p>For more information, see Help and Support Center at <a href=http://go.microsoft.com/fwlink/events.asp>http://go.microsoft.com/fwlink/events.asp</a>.</p></blockquote><p>As it is recommended in first event and numerous forums I have tried to run:</p><p><code>msdtc -resetlog</code></p><p>but this command generated another error:</p><blockquote>
<p>Event Type: Error<br>
Event Source: MSDTC<br>
Event Category: SVC<br>
Event ID: 4135<br>
Date: 2011-08-02<br>
Time: 12:01:51 PM<br>
User: N/A<br>
Computer: <em>servername</em><br>
Description:<br>
Failed to create/reset the MS DTC log file.</p><p>For more information, see Help and Support Center at <a href=http://go.microsoft.com/fwlink/events.asp>http://go.microsoft.com/fwlink/events.asp</a>.</p></blockquote><p>after some search I have found several solutions to this problem, such as activating network access for DTC, but nothing helped. From colleagues I have learn that this server previously was in cluster but then cluster was abolished. So problem was with log file settings of MSDTC and I have decided to find out where Whindows store information about this files. After short search on healthy system I have found registry key <strong>HKEY_CLASSES_ROOT\CID{GUID}\CustomProperties\LOG\Path</strong> where {GUID} some random GUID. Default value of this key pointed to MSDTC log file. After this I have looked through <strong>HKEY_CLASSES_ROOT\CID\</strong> subkeys on problem server and found GUID stored similar settings. Log file settings here pointed to Q:\MsDtc, where Q: previously was quorum drive and not longer existed. After fixing this setting to point correct path, problem has gone.</p><div class=blog-tags>
<a href=https://trukhanov.com/tags/event-id-4135/>event id 4135</a>&nbsp;
<a href=https://trukhanov.com/tags/MS-DTC/>MS DTC</a>&nbsp;
<a href=https://trukhanov.com/tags/windows-server-2003/>windows server 2003</a>&nbsp;
</div></article><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var e=document.createElement("script"),t;e.type="text/javascript",e.async=!0,t="trukhanov-com",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script>
<noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div><footer>
<div class=social-icons>
</div><div class=container>
<p class="credits copyright">
<a href=https://trukhanov.com/about></a>
&nbsp;&copy;
2017
&nbsp;/&nbsp;
<a href=https://trukhanov.com/>Perpetuum informatio - Never ending IT story</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em>
</p><p class="credits theme-by">
Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a>
</p></div></footer></body></html>